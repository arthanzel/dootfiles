#!/bin/sh

doc="This tool lists and switches active versions of SDKs like Java.
Reminiscent of Debian's update-alternatives tool.

Usage:
art-alternative            Lists targets (SDKs) in /opt.
art-alternative java       Lists versions of java in /opt/java.
                       Will warn you if java doesn't exist.
art-alternative java 8u74  Symlinks /opt/java/8u74 to /opt/java/java-current.
                           java-current may now be set to \$JAVA_HOME or a similar
                           variable.
                           Will warn you if 8u74 doesn't exist.

art-alternative is, of course, not limited to Java."

if [[ $1 ==  "-h" ]]; then
    echo "$doc"
elif [ -z $1 ]; then
    ls /opt    
else
    if [ -z $2 ]; then
        if [ -d /opt/$1 ]; then
            ls /opt/$1
        else
            echo "$1 is not a target!"
        fi
    else
        if [ -d /opt/$1/$2 ]; then
            ln -sf /opt/$1/$2 /opt/$1/"${1}-current"
            echo "$2 is now the active version of $1."
        else
            echo "$2 is not a version of $1!"
        fi
    fi
fi
